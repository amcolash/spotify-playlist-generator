{"version":3,"sources":["Loading.tsx","Song.tsx","Playlist.tsx","UserPlaylists.tsx","util.ts","Generate.tsx","Login.tsx","img/Spotify_Logo_RGB_Green.png","App.tsx","index.tsx"],"names":["Loading","props","style","display","flexDirection","alignItems","text","SpinnerCircularFixed","size","thickness","speed","color","secondaryColor","s","margin","Song","song","className","backgroundImage","album","images","url","marginLeft","name","artists","id","$nest","padding","cursor","transition","background","Playlist","playlist","onClick","generatePlaylist","UserPlaylists","height","width","marginTop","playlists","sort","a","b","localeCompare","map","p","length","spotify","SpotifyWebApi","paginationHelper","getData","Promise","resolve","reject","allData","page","data","push","body","items","next","getUserPlaylists","limit","offset","getPlaylist","getPlaylistTracks","getRelated","related","tracks","i","is_local","track","getRecommendations","seed_tracks","forEach","t","findIndex","f","createPlaylist","generated","prompt","addTracksToPlaylist","slice","uri","window","open","external_urls","generate","justifyContent","Generate","useState","setPlaylists","isGenerating","setIsGenerating","setGenerated","useEffect","then","marginBottom","undefined","marginRight","login","setAuthenticated","token","params","hashParams","r","q","location","hash","substring","e","exec","decodeURIComponent","getHashParams","access_token","state","localStorage","getItem","setAccessToken","Math","random","toString","showDialog","setItem","authorizeURL","href","Login","firstAuth","fontSize","appStyle","overflowX","cssRule","backgroundSize","backgroundPosition","border","App","authenticated","user","setUser","getMe","position","top","right","display_name","removeItem","bottom","textAlign","src","spotifyLogo","alt","fontFamily","scrollbarColor","fontWeight","minWidth","borderRadius","textTransform","backgroundColor","fadeIn","keyframes","opacity","ReactDOM","render","StrictMode","animation","animationDelay","animationDuration","animationFillMode","document","getElementById"],"mappings":"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","file":"static/js/main.55042d56.chunk.js","sourcesContent":["import { SpinnerCircularFixed } from 'spinners-react';\n\nexport function Loading(props: { text: string }) {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n      <h2>{props.text}</h2>\n      <SpinnerCircularFixed size={40} thickness={200} speed={100} color=\"#179433\" secondaryColor=\"#202324\" />\n    </div>\n  );\n}\n","import { style } from 'typestyle';\n\nconst s = style({\n  display: 'flex',\n  alignItems: 'center',\n  margin: 8,\n});\n\nexport function Song(props: { song: SpotifyApi.TrackObjectSimplified }) {\n  const { song } = props;\n\n  return (\n    <div className={s} key={song.id}>\n      <div\n        className=\"cover\"\n        style={{ backgroundImage: (song as any).album.images[2] ? `url(${(song as any).album.images[2].url})` : '' }}\n      />\n      <div style={{ marginLeft: 10 }}>\n        {song.name} - {song.artists[0].name}\n      </div>\n    </div>\n  );\n}\n","import { style } from 'typestyle';\n\nconst s = style({\n  $nest: {\n    '.box': {\n      display: 'inline-flex',\n      alignItems: 'center',\n      padding: '8px 12px',\n\n      cursor: 'pointer',\n      transition: 'background 0.25s',\n\n      $nest: {\n        '&:hover': {\n          background: '#333',\n        },\n      },\n    },\n  },\n});\n\nexport function Playlist(props: { playlist: SpotifyApi.PlaylistObjectSimplified; generatePlaylist: (id: string) => void }) {\n  const { playlist } = props;\n\n  return (\n    <div className={s} key={playlist.id}>\n      <div className=\"box\" onClick={() => props.generatePlaylist(playlist.id)}>\n        <div\n          className=\"cover\"\n          style={{\n            backgroundImage: playlist.images[2]\n              ? `url(${playlist.images[2].url})`\n              : playlist.images[0]\n              ? `url(${playlist.images[0].url})`\n              : '',\n          }}\n        />\n        <div style={{ marginLeft: 10 }}>{playlist.name}</div>\n      </div>\n    </div>\n  );\n}\n","import { Playlist } from './Playlist';\n\nexport function UserPlaylists(props: { playlists: SpotifyApi.PlaylistObjectSimplified[]; generatePlaylist: (id: string) => void }) {\n  return (\n    <div style={{ height: '100%', width: '100%', marginTop: 36, marginLeft: 20 }}>\n      <h2 style={{ marginLeft: 8, marginTop: 12 }}>Choose a Playlist</h2>\n      {props.playlists\n        .sort((a, b) => a.name.localeCompare(b.name))\n        .map((p) => p.name && p.name.length > 0 && <Playlist key={p.id} playlist={p} generatePlaylist={props.generatePlaylist} />)}\n    </div>\n  );\n}\n","import SpotifyWebApi from 'spotify-web-api-node';\n\n// Useful code from https://stackoverflow.com/questions/58964265/spotify-implicit-grant-flow-with-react-user-login\nexport function getHashParams(): { [key: string]: string } {\n  const hashParams: { [key: string]: string } = {};\n  const r = /([^&;=]+)=?([^&;]*)/g;\n  const q = window.location.hash.substring(1);\n  let e = r.exec(q);\n  while (e) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n    e = r.exec(q);\n  }\n  return hashParams;\n}\n\nexport const spotify = new SpotifyWebApi();\nexport function setSpotifyToken(token: string): void {\n  spotify.setAccessToken(token);\n}\n\n// Uff, that is a bit generic ;)\nasync function paginationHelper<T>(\n  getData: (\n    page: number\n  ) => Promise<{\n    body: {\n      items: T[];\n      next: string | null;\n    };\n  }>\n): Promise<T[]> {\n  return new Promise<T[]>(async (resolve, reject) => {\n    const allData: T[] = [];\n    let page = 0;\n\n    while (page >= 0) {\n      const data = await getData(page);\n      allData.push(...(data.body.items as any[]));\n\n      page = data.body.next ? page + 1 : -1;\n    }\n\n    resolve(allData);\n  });\n}\n\nexport async function getUserPlaylists(): Promise<SpotifyApi.PlaylistObjectSimplified[]> {\n  return paginationHelper((page: number) => spotify.getUserPlaylists({ limit: 50, offset: page * 50 }));\n}\n\nexport async function getPlaylist(id: string): Promise<SpotifyApi.PlaylistTrackObject[]> {\n  return paginationHelper((page: number) => spotify.getPlaylistTracks(id, { limit: 100, offset: page * 100 }));\n}\n\nexport async function getRelated(playlist: SpotifyApi.PlaylistTrackObject[]): Promise<SpotifyApi.TrackObjectSimplified[]> {\n  return new Promise(async (resolve, reject) => {\n    const related: SpotifyApi.TrackObjectSimplified[] = [];\n\n    let tracks = '';\n    for (let i = 1; i <= playlist.length; i++) {\n      if (playlist[i - 1].is_local) continue;\n\n      tracks += playlist[i - 1].track.id + (i % 5 !== 0 ? ',' : '');\n\n      if (i % 5 === 0) {\n        const rec = await spotify.getRecommendations({ seed_tracks: tracks, limit: 10 });\n\n        // Ensure there are no duplicated. Can't use a Set here since {} !== {}\n        rec.body.tracks.forEach((t) => {\n          const found = related.findIndex((f) => f.id === t.id);\n          if (found === -1) related.push(t);\n        });\n\n        tracks = '';\n      }\n    }\n\n    resolve(related);\n  });\n}\n\nexport async function createPlaylist(generated: SpotifyApi.TrackObjectSimplified[]): Promise<void> {\n  return new Promise(async (resolve, reject) => {\n    const name = prompt('Name of playlist?');\n    if (!name || name.length === 0) {\n      reject();\n      return;\n    }\n\n    const p = await spotify.createPlaylist(name);\n\n    for (let i = 0; i < generated.length; i += 100) {\n      await spotify.addTracksToPlaylist(\n        p.body.id,\n        generated.slice(i, i + 100).map((t) => t.uri)\n      );\n    }\n\n    window.open(p.body.external_urls.spotify, '_blank');\n\n    resolve();\n  });\n}\n","import { useEffect, useState } from 'react';\nimport { style } from 'typestyle';\nimport { Loading } from './Loading';\n\nimport { Song } from './Song';\nimport { UserPlaylists } from './UserPlaylists';\nimport { getUserPlaylists, getPlaylist, getRelated, createPlaylist } from './util';\n\nconst generate = style({\n  height: '100%',\n  width: '100%',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  flexDirection: 'column',\n  padding: 20,\n  marginLeft: 20,\n});\n\nexport function Generate() {\n  const [playlists, setPlaylists] = useState<SpotifyApi.PlaylistObjectSimplified[]>();\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generated, setGenerated] = useState<SpotifyApi.TrackObjectSimplified[]>();\n\n  useEffect(() => {\n    getUserPlaylists().then((data) => setPlaylists(data));\n  }, []);\n\n  const generatePlaylist = async (id: string) => {\n    setIsGenerating(true);\n\n    const playlist = await getPlaylist(id);\n    const related = await getRelated(playlist);\n\n    setGenerated(related);\n    setIsGenerating(false);\n  };\n\n  return (\n    <div className={generate}>\n      {!playlists && <Loading text=\"Loading Your Playlists\" />}\n      {!isGenerating && playlists && !generated && <UserPlaylists playlists={playlists} generatePlaylist={generatePlaylist} />}\n      {isGenerating && <Loading text=\"Finding Related Music\" />}\n      {generated && (\n        <div style={{ width: '100%', height: '100%', display: 'flex', flexDirection: 'column' }}>\n          <div style={{ display: 'flex', justifyContent: 'center', marginTop: 60, marginBottom: 14 }}>\n            <button onClick={() => setGenerated(undefined)} style={{ marginRight: 30 }}>\n              Back\n            </button>\n            <button onClick={async () => await createPlaylist(generated)}>Save My Playlist</button>\n          </div>\n          {generated.map((t) => (\n            <Song key={t.id} song={t} />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useEffect } from 'react';\nimport { Loading } from './Loading';\nimport { getHashParams, setSpotifyToken } from './util';\n\nfunction login(setAuthenticated: (authenticated: boolean) => void) {\n  const params = getHashParams();\n\n  if (!params.access_token || params.state !== localStorage.getItem('spotifyState')) {\n    const scopes = ['playlist-read-private', 'playlist-modify-public'],\n      redirectUri = 'http://localhost:3000',\n      clientId = 'c2fc1a6c5ec54aa2819513c41fc6d12f',\n      state = Math.random().toString(),\n      showDialog = !localStorage.getItem('spotifyState');\n\n    localStorage.setItem('spotifyState', state);\n\n    // Do client-based auth flow\n    const authorizeURL = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=token&redirect_uri=${redirectUri}&scope=${scopes}&state=${state}&show_dialog=${showDialog}`;\n    window.location.href = authorizeURL;\n  } else {\n    setAuthenticated(true);\n    setSpotifyToken(params.access_token);\n\n    window.location.hash = '';\n  }\n}\n\nexport function Login(props: { setAuthenticated: (authenticated: boolean) => void }) {\n  const firstAuth = !localStorage.getItem('spotifyState');\n\n  useEffect(() => {\n    if (!firstAuth) login(props.setAuthenticated);\n  }, [props, firstAuth]);\n\n  if (!firstAuth) return <Loading text=\"Logging In\" />;\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}>\n      <h1 style={{ marginBottom: 0, fontSize: 72 }}>[DiscoList]</h1>\n      <h3 style={{ marginTop: 4, marginBottom: 80 }}>Smart Music Discovery</h3>\n      <h2>Please Login to Spotify</h2>\n      <button onClick={() => login(props.setAuthenticated)}>Login</button>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/Spotify_Logo_RGB_Green.0c4ae91b.png\";","import { useEffect, useState } from 'react';\nimport { cssRule, style } from 'typestyle';\n\nimport { Generate } from './Generate';\nimport { Login } from './Login';\nimport { spotify } from './util';\n\nimport spotifyLogo from './img/Spotify_Logo_RGB_Green.png';\n\nconst appStyle = style({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  width: '100vw',\n  height: '100vh',\n  overflowX: 'hidden',\n});\n\ncssRule('.cover', {\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  height: 50,\n  width: 50,\n  border: '1px solid #555',\n});\n\nfunction App() {\n  const [authenticated, setAuthenticated] = useState(false);\n  const [user, setUser] = useState<SpotifyApi.CurrentUsersProfileResponse>();\n\n  useEffect(() => {\n    if (authenticated) spotify.getMe().then((data) => setUser(data.body));\n  }, [authenticated]);\n\n  const logout = () => {\n    localStorage.removeItem('spotifyState');\n    setAuthenticated(false);\n    setUser(undefined);\n  };\n\n  return (\n    <div className={`App ${appStyle}`}>\n      {!authenticated && <Login setAuthenticated={setAuthenticated} />}\n      {authenticated && <Generate />}\n\n      {user && (\n        <div style={{ position: 'absolute', top: 20, right: authenticated ? 30 : 20 }}>\n          {user.display_name}\n          <button style={{ marginLeft: 20 }} onClick={() => logout()}>\n            Logout\n          </button>\n        </div>\n      )}\n\n      <div style={{ position: 'absolute', bottom: 10, right: authenticated ? 30 : 20, textAlign: 'right' }}>\n        <h3 style={{ marginBottom: 10 }}>Powered By</h3>\n        <img src={spotifyLogo} style={{ height: 35 }} alt=\"Spotify Logo\" />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { cssRule, keyframes } from 'typestyle';\nimport App from './App';\n\ncssRule('body', {\n  margin: 0,\n  background: '#151515',\n  color: '#eee',\n  fontFamily: \"'Montserrat', sans-serif\",\n  fontSize: 20,\n  scrollbarColor: '#454a4d #202324',\n});\n\ncssRule('button', {\n  fontSize: 16,\n  fontWeight: 'bold',\n  minWidth: 100,\n  padding: 10,\n  borderRadius: 500,\n  background: '#179433',\n  border: 'none',\n  color: '#eee',\n  textTransform: 'uppercase',\n  transition: 'background 0.25s',\n  cursor: 'pointer',\n\n  $nest: {\n    '&:hover': {\n      background: '#18AC4D',\n    },\n  },\n});\n\ncssRule('::-webkit-scrollbar', {\n  backgroundColor: '#202324',\n});\n\ncssRule('::-webkit-scrollbar-thumb', {\n  backgroundColor: '#454a4d',\n});\n\nconst fadeIn = keyframes({\n  '0%': { opacity: 0 },\n  '100%': { opacity: 1 },\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <div style={{ opacity: 0, animation: fadeIn, animationDelay: '0.5s', animationDuration: '0.25s', animationFillMode: 'forwards' }}>\n      <App />\n    </div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}