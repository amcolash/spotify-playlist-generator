(this["webpackJsonpspotify-playlist-generator"]=this["webpackJsonpspotify-playlist-generator"]||[]).push([[0],{76:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(15),c=n.n(i),s=n(2),o=n(6),l=n(5),u=n.n(l),d=n(3),p=n(7),b=n(79),j=n(80),f=n(28),h=n.n(f),g=n(82),O=n(31),m=n(29),x={maxWidth:450},y="#EEEEEE",v="#179433",k="#18AC4D",w="#151515";function S(t){for(var e,n,r=t.length;0!==r;)n=Math.floor(Math.random()*r),e=t[r-=1],t[r]=t[n],t[n]=e;return t}var C=new(n.n(m).a);function I(t){var e=Number.parseInt(localStorage.getItem("spotifyLastError")||"0");Date.now()-e>5e3&&(localStorage.setItem("spotifyLastError",Date.now().toString()),window.location.reload())}function P(t){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(p.a)(u.a.mark((function t(n,r){var a,i,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],i=0;case 2:if(!(i>=0)){t.next=17;break}return t.prev=3,t.next=6,e(i);case 6:c=t.sent,a.push.apply(a,Object(O.a)(c.body.items)),i=c.body.next?i+1:-1,t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(3),I(t.t0),t.abrupt("return");case 15:t.next=2;break;case 17:n(a);case 18:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P((function(t){return C.getUserPlaylists({limit:50,offset:50*t})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t){return R.apply(this,arguments)}function R(){return(R=Object(p.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P((function(t){return C.getPlaylistTracks(e,{limit:100,offset:100*t})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t,e){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(p.a)(u.a.mark((function t(r,a){var i,c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],n.shuffle&&S(e),c="",s=1;case 4:if(!(s<=e.length)){t.next=25;break}if(!e[s-1].is_local){t.next=7;break}return t.abrupt("continue",22);case 7:if(n.trackSeed?c+=e[s-1].track.id+(s%5!==0?",":""):c+=e[s-1].track.artists[0].id+(s%5!==0?",":""),s%5!==0){t.next=22;break}return t.prev=9,void 0,t.next=13,C.getRecommendations({seed_tracks:n.trackSeed?c:void 0,seed_artists:n.trackSeed?void 0:c,limit:n.resultsPerGroup});case 13:t.sent.body.tracks.forEach((function(t){-1===i.findIndex((function(e){return e.id===t.id}))&&i.push(t)})),c="",t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(9),I(t.t0),t.abrupt("return");case 22:s++,t.next=4;break;case 25:r(i);case 26:case"end":return t.stop()}}),t,null,[[9,18]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t,e){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(p.a)(u.a.mark((function t(r,a){var i,c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=prompt("Name of playlist?"))&&0!==i.length){t.next=4;break}return a(),t.abrupt("return");case 4:return t.prev=4,t.next=7,C.createPlaylist(i);case 7:c=t.sent,s=0;case 9:if(!(s<e.length)){t.next=15;break}return t.next=12,C.addTracksToPlaylist(c.body.id,e.slice(s,s+100).map((function(t){return t.uri})));case 12:s+=100,t.next=9;break;case 15:n(c.body.external_urls.spotify),t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(4),I(t.t0),t.abrupt("return");case 22:r();case 23:case"end":return t.stop()}}),t,null,[[4,18]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var B=n(0);function M(t){return Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",marginTop:60},children:[Object(B.jsx)("h2",{children:t.text}),Object(B.jsx)(g.a,{size:40,thickness:200,speed:100,color:v,secondaryColor:"#202324"})]})}var W=n(78),z=n(30),G=n(16),$=n.n(G),F=n.p+"static/media/icon.9570cc01.svg",H=Object(s.d)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:20},Object(s.c)(x,{padding:0}));function J(t){return Object(B.jsxs)("div",{className:H,children:[Object(B.jsx)(W.a,{onClick:function(){return t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{playlist:void 0}))},style:{position:"absolute",top:14,right:14,cursor:"pointer"}}),Object(B.jsx)("h2",{children:"Playlist Generation Options"}),t.options.playlist&&Object(B.jsxs)("label",{children:["Source Playlist: ",t.options.playlist.name]}),Object(B.jsx)("label",{style:{marginTop:24,marginBottom:12},children:"Playlist Size"}),Object(B.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",marginBottom:10},children:[Object(B.jsx)("label",{style:{marginRight:20},children:"Similar"}),Object(B.jsx)(z.Range,{step:5,min:5,max:25,values:[t.options.resultsPerGroup],onChange:function(e){return t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{resultsPerGroup:e[0]}))},renderTrack:function(t){var e=t.props,n=t.children;return Object(B.jsx)("div",Object(d.a)(Object(d.a)({},e),{},{style:Object(d.a)(Object(d.a)({},e.style),{},{height:5,width:"100%",backgroundColor:y}),children:n}))},renderThumb:function(t){var e=t.props;return Object(B.jsx)("div",Object(d.a)(Object(d.a)({},e),{},{style:Object(d.a)(Object(d.a)({},e.style),{},{height:24,width:24,borderRadius:"100%",border:"1px solid ".concat(y),backgroundColor:v})}))}}),Object(B.jsx)("label",{style:{marginLeft:20},children:"Larger"})]}),Object(B.jsxs)("label",{style:{display:"flex",alignItems:"center",margin:"10px 0"},children:[Object(B.jsx)("span",{style:{marginRight:10,fontWeight:t.options.shuffle?void 0:"bold"},onClick:function(e){t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{shuffle:!1})),e.stopPropagation(),e.preventDefault()},children:"Ordered"}),Object(B.jsx)($.a,{onChange:function(e){return t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{shuffle:e}))},checked:t.options.shuffle,checkedIcon:!1,uncheckedIcon:!1,onColor:v,offColor:v}),Object(B.jsx)("span",{style:{marginLeft:10,fontWeight:t.options.shuffle?"bold":void 0,textAlign:"right"},onClick:function(e){t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{shuffle:!0})),e.stopPropagation(),e.preventDefault()},children:"Shuffled"})]}),Object(B.jsxs)("label",{style:{display:"flex",alignItems:"center",margin:"10px 0"},children:[Object(B.jsx)("span",{style:{marginRight:10,fontWeight:t.options.trackSeed?"bold":void 0},onClick:function(e){t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{trackSeed:!0})),e.stopPropagation(),e.preventDefault()},children:"Playlist Tracks"}),Object(B.jsx)($.a,{onChange:function(e,n){return t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{trackSeed:!e}))},checked:!t.options.trackSeed,checkedIcon:!1,uncheckedIcon:!1,onColor:v,offColor:v}),Object(B.jsx)("span",{style:{marginLeft:10,fontWeight:t.options.trackSeed?void 0:"bold",textAlign:"right"},onClick:function(e){t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{trackSeed:!1})),e.stopPropagation(),e.preventDefault()},children:"Playlist Artists"})]}),Object(B.jsxs)("button",{style:{marginTop:26,display:"flex",alignItems:"center"},onClick:t.generatePlaylist,children:[Object(B.jsx)("img",{src:F,style:{width:32,filter:"grayscale(1) brightness(2)",marginRight:6},alt:""}),"DiscoList"]})]})}var U=Object(s.d)({display:"flex",padding:8}),Y=Object(s.d)({display:"flex",alignItems:"center",marginLeft:10});function q(t){var e=t.song;return Object(B.jsxs)("div",{className:U,children:[Object(B.jsx)("div",{className:"cover",style:{backgroundImage:e.album.images[2]?"url(".concat(e.album.images[2].url,")"):""}}),Object(B.jsxs)("div",{className:Y,children:[e.name," - ",e.artists[0].name]})]},e.id)}var X=Object(s.d)({$nest:{".box":{display:"inline-flex",alignItems:"center",padding:"8px 12px",cursor:"pointer",transition:"background 0.25s",$nest:{"&:hover":{background:"#333"}}}}});function K(t){var e=t.playlist;return Object(B.jsx)("div",{className:X,children:Object(B.jsxs)("div",{className:"box",onClick:function(){return t.setOptions(Object(d.a)(Object(d.a)({},t.options),{},{playlist:e}))},style:{background:t.options.playlist&&t.options.playlist.id===e.id?"#333":void 0},children:[Object(B.jsx)("div",{className:"cover",style:{backgroundImage:e.images[2]?"url(".concat(e.images[2].url,")"):e.images[0]?"url(".concat(e.images[0].url,")"):""}}),Object(B.jsx)("div",{style:{marginLeft:10},children:e.name})]})},e.id)}var Q=Object(s.d)({marginLeft:8,marginTop:12},Object(s.c)(x,{textAlign:"center"}));function V(t){return Object(B.jsxs)("div",{style:{width:"100%"},children:[Object(B.jsx)("h2",{className:Q,children:"Choose a Playlist"}),t.playlists.sort((function(t,e){return t.name.localeCompare(e.name)})).map((function(e){return e.name&&e.name.length>0&&Object(B.jsx)(K,{playlist:e,options:t.options,setOptions:t.setOptions},e.id)}))]})}var Z=Object(s.d)({height:"calc(100% - 40px)",width:"calc(100% - 40px)",maxWidth:800,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:20},Object(s.c)(x,{paddingBottom:55}));function tt(t){var e=Object(r.useState)(),n=Object(o.a)(e,2),a=n[0],i=n[1],c=Object(r.useState)({shuffle:!1,resultsPerGroup:5,trackSeed:!0}),s=Object(o.a)(c,2),l=s[0],f=s[1],g=Object(r.useState)(!1),O=Object(o.a)(g,2),m=O[0],x=O[1],y=Object(r.useState)(),v=Object(o.a)(y,2),k=v[0],S=v[1],C=Object(r.useState)(),I=Object(o.a)(C,2),P=I[0],D=I[1];Object(r.useEffect)((function(){(function(){return L.apply(this,arguments)})().then((function(t){return i(t)}))}),[]);var R=function(){var t=Object(p.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.playlist){t.next=2;break}return t.abrupt("return");case 2:return x(!0),t.next=5,N(l.playlist.id);case 5:return e=t.sent,t.next=8,_(e,l);case 8:n=t.sent,f(Object(d.a)(Object(d.a)({},l),{},{playlist:void 0})),S(n),x(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:Z,children:[Object(B.jsx)("button",{onClick:function(){return t.logout()},style:{marginBottom:30},children:Object(B.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(B.jsx)(b.a,{style:{marginRight:10}}),"Sign Out"]})}),Object(B.jsx)(h.a,{isOpen:void 0!==l.playlist&&!m&&!k,onRequestClose:function(){return f(Object(d.a)(Object(d.a)({},l),{},{playlist:void 0}))},contentLabel:"Playlist Generation Options",style:{content:{maxHeight:"calc(95vh - 40px)",background:w,top:"50%",left:"52%",right:"auto",bottom:"auto",marginRight:"-46%",transform:"translate(-52%, -50%)"},overlay:{background:"rgba(30,30,30,0.95)"}},bodyOpenClassName:"modal-open",children:Object(B.jsx)(J,{options:l,setOptions:f,generatePlaylist:R})}),!a&&Object(B.jsx)(M,{text:"Loading Your Playlists"}),!m&&a&&!k&&Object(B.jsx)(V,{playlists:a,options:l,setOptions:f}),m&&Object(B.jsx)(M,{text:"Finding Related Music"}),k&&Object(B.jsxs)("div",{style:{width:"100%"},children:[Object(B.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:20,marginBottom:14},children:[Object(B.jsx)("button",{onClick:function(){return S(void 0)},style:{marginRight:30},children:"Back"}),P&&Object(B.jsxs)("button",{onClick:function(){return window.open(P,"_blank")},children:[Object(B.jsx)(j.a,{})," Open Playlist"]}),!P&&Object(B.jsx)("button",{onClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(k,D);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Save My Playlist"})]}),k.map((function(t){return Object(B.jsx)(q,{song:t},t.id)}))]})]})}var et=n(81);function nt(t){var e,n=function(){for(var t={},e=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1),r=e.exec(n);r;)t[r[1]]=decodeURIComponent(r[2]),r=e.exec(n);return t}();if(n.access_token&&n.state===localStorage.getItem("spotifyState"))t(!0),e=n.access_token,C.setAccessToken(e),window.location.hash="";else{var r=Math.random().toString(),a=!localStorage.getItem("spotifyState");localStorage.setItem("spotifyState",r);var i="https://accounts.spotify.com/authorize?client_id=".concat("c2fc1a6c5ec54aa2819513c41fc6d12f","&response_type=token&redirect_uri=").concat("https://amcolash.github.io/spotify-playlist-generator/","&scope=").concat(["playlist-read-private","playlist-modify-public"],"&state=").concat(r,"&show_dialog=").concat(a);window.location.href=i}}var rt=Object(s.d)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",height:"100vh"},Object(s.c)(x,{height:"calc(100vh - 46px)"})),at=Object(s.d)({fontSize:72},Object(s.c)(x,{fontSize:52})),it=Object(s.d)({height:156,margin:42},Object(s.c)(x,{height:156,margin:16}),Object(s.c)({maxHeight:575},{margin:0})),ct=Object(s.d)();function st(t){var e=!localStorage.getItem("spotifyState");return Object(r.useEffect)((function(){e||nt(t.setAuthenticated)}),[t,e]),e?Object(B.jsxs)("div",{className:rt,children:[Object(B.jsx)("h1",{className:at,style:{margin:0},children:"[DiscoList]"}),Object(B.jsx)("h3",{style:{marginTop:4},children:"Smarter Music Discovery"}),Object(B.jsx)("img",{className:it,src:F,alt:"DiscoList logo"}),Object(B.jsxs)("h2",{className:ct,children:["Please sign in",Object(B.jsx)("br",{})," with Spotify"]}),Object(B.jsx)("button",{onClick:function(){return nt(t.setAuthenticated)},children:Object(B.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(B.jsx)(et.a,{style:{marginRight:10}}),"Sign In"]})})]}):Object(B.jsx)(M,{text:"Logging In"})}var ot=n.p+"static/media/Spotify_Logo_RGB_Green.0c4ae91b.png",lt=Object(s.d)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflowX:"hidden"});Object(s.a)(".cover",{backgroundSize:"cover",backgroundPosition:"center",height:50,width:50,minWidth:50,border:"1px solid #555"});var ut=Object(s.d)({position:"fixed",right:0,bottom:0,display:"flex",alignItems:"center",padding:"8px 5px 0",background:"rgba(0,0,0,0.85)"},Object(s.c)(x,{left:0,justifyContent:"center"}));var dt=function(){var t=Object(r.useState)(!1),e=Object(o.a)(t,2),n=e[0],a=e[1];return Object(B.jsxs)("div",{className:"App ".concat(lt),children:[!n&&Object(B.jsx)(st,{setAuthenticated:a}),n&&Object(B.jsx)(tt,{logout:function(){localStorage.removeItem("spotifyState"),a(!1)}}),Object(B.jsxs)("div",{className:ut,children:[Object(B.jsx)("h3",{style:{margin:0,marginBottom:8},children:"Powered By"}),Object(B.jsx)("a",{href:"https://spotify.com",target:"_blank",rel:"noreferrer",style:{marginLeft:12},children:Object(B.jsx)("img",{src:ot,style:{height:35},alt:"Spotify Logo"})})]})]})};Object(s.a)("body",{margin:0,background:w,color:y,fontFamily:"'Montserrat', sans-serif",fontSize:20,scrollbarColor:"#454a4d #202324",$nest:{"&.modal-open":{overflowY:"hidden"}}}),Object(s.a)("button",{fontSize:16,fontWeight:"bold",minWidth:100,padding:10,borderRadius:500,background:v,border:"none",color:y,textTransform:"uppercase",transition:"background 0.25s",cursor:"pointer",$nest:{"&:hover":{background:k}}}),Object(s.a)("::-webkit-scrollbar",{backgroundColor:"#202324"}),Object(s.a)("::-webkit-scrollbar-thumb",{backgroundColor:"#454a4d"});var pt=Object(s.b)({"0%":{opacity:0},"100%":{opacity:1}});if(window.screen&&window.screen.orientation&&window.screen.orientation.lock)try{window.screen.orientation.lock("portrait")}catch(bt){console.error(bt)}c.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)("div",{style:{opacity:0,animation:pt,animationDelay:"0.5s",animationDuration:"0.25s",animationFillMode:"forwards"},children:Object(B.jsx)(dt,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.6fdb8952.chunk.js.map