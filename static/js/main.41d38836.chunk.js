(this["webpackJsonpspotify-playlist-generator"]=this["webpackJsonpspotify-playlist-generator"]||[]).push([[0],{55:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(18),i=n.n(c),s=n(2),o=n(6),l=n(3),u=n.n(l),d=n(5),p=n(57),b=n(58),f=n(60),j=n(0);function m(t){return Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",marginTop:60},children:[Object(j.jsx)("h2",{children:t.text}),Object(j.jsx)(f.a,{size:40,thickness:200,speed:100,color:"#179433",secondaryColor:"#202324"})]})}var h=Object(s.d)({display:"flex",padding:8}),g=Object(s.d)({display:"flex",alignItems:"center",marginLeft:10});function x(t){var e=t.song;return Object(j.jsxs)("div",{className:h,children:[Object(j.jsx)("div",{className:"cover",style:{backgroundImage:e.album.images[2]?"url(".concat(e.album.images[2].url,")"):""}}),Object(j.jsxs)("div",{className:g,children:[e.name," - ",e.artists[0].name]})]},e.id)}var y=Object(s.d)({$nest:{".box":{display:"inline-flex",alignItems:"center",padding:"8px 12px",cursor:"pointer",transition:"background 0.25s",$nest:{"&:hover":{background:"#333"}}}}});function O(t){var e=t.playlist;return Object(j.jsx)("div",{className:y,children:Object(j.jsxs)("div",{className:"box",onClick:function(){return t.generatePlaylist(e.id)},children:[Object(j.jsx)("div",{className:"cover",style:{backgroundImage:e.images[2]?"url(".concat(e.images[2].url,")"):e.images[0]?"url(".concat(e.images[0].url,")"):""}}),Object(j.jsx)("div",{style:{marginLeft:10},children:e.name})]})},e.id)}var v=n(20),k=n(19),w={maxWidth:450};var S=new(n.n(k).a);function I(t){var e=Number.parseInt(localStorage.getItem("spotifyLastError")||"0");Date.now()-e>5e3&&(localStorage.setItem("spotifyLastError",Date.now().toString()),window.location.reload())}function C(t){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(d.a)(u.a.mark((function t(n,r){var a,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c=0;case 2:if(!(c>=0)){t.next=17;break}return t.prev=3,t.next=6,e(c);case 6:i=t.sent,a.push.apply(a,Object(v.a)(i.body.items)),c=i.body.next?c+1:-1,t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(3),I(t.t0),t.abrupt("return");case 15:t.next=2;break;case 17:n(a);case 18:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(){return(N=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",C((function(t){return S.getUserPlaylists({limit:50,offset:50*t})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",C((function(t){return S.getPlaylistTracks(e,{limit:100,offset:100*t})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(d.a)(u.a.mark((function t(n,r){var a,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c="",i=1;case 3:if(!(i<=e.length)){t.next=23;break}if(!e[i-1].is_local){t.next=6;break}return t.abrupt("continue",20);case 6:if(c+=e[i-1].track.id+(i%5!==0?",":""),i%5!==0){t.next=20;break}return t.prev=8,t.next=11,S.getRecommendations({seed_tracks:c,limit:10});case 11:t.sent.body.tracks.forEach((function(t){-1===a.findIndex((function(e){return e.id===t.id}))&&a.push(t)})),c="",t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(8),I(t.t0),t.abrupt("return");case 20:i++,t.next=3;break;case 23:n(a);case 24:case"end":return t.stop()}}),t,null,[[8,16]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t,e){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(d.a)(u.a.mark((function t(r,a){var c,i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((c=prompt("Name of playlist?"))&&0!==c.length){t.next=4;break}return a(),t.abrupt("return");case 4:return t.prev=4,t.next=7,S.createPlaylist(c);case 7:i=t.sent,s=0;case 9:if(!(s<e.length)){t.next=15;break}return t.next=12,S.addTracksToPlaylist(i.body.id,e.slice(s,s+100).map((function(t){return t.uri})));case 12:s+=100,t.next=9;break;case 15:n(i.body.external_urls.spotify),t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(4),I(t.t0),t.abrupt("return");case 22:r();case 23:case"end":return t.stop()}}),t,null,[[4,18]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var R=Object(s.d)({marginLeft:8,marginTop:12},Object(s.c)(w,{textAlign:"center"}));function z(t){return Object(j.jsxs)("div",{style:{width:"100%"},children:[Object(j.jsx)("h2",{className:R,children:"Choose a Playlist"}),t.playlists.sort((function(t,e){return t.name.localeCompare(e.name)})).map((function(e){return e.name&&e.name.length>0&&Object(j.jsx)(O,{playlist:e,generatePlaylist:t.generatePlaylist},e.id)}))]})}var M=Object(s.d)({height:"calc(100% - 40px)",width:"calc(100% - 40px)",maxWidth:800,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:20},Object(s.c)(w,{paddingBottom:55}));function E(t){var e=Object(r.useState)(),n=Object(o.a)(e,2),a=n[0],c=n[1],i=Object(r.useState)(!1),s=Object(o.a)(i,2),l=s[0],f=s[1],h=Object(r.useState)(),g=Object(o.a)(h,2),y=g[0],O=g[1],v=Object(r.useState)(),k=Object(o.a)(v,2),w=k[0],S=k[1];Object(r.useEffect)((function(){(function(){return N.apply(this,arguments)})().then((function(t){return c(t)}))}),[]);var I=function(){var t=Object(d.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.next=3,_(e);case 3:return n=t.sent,t.next=6,L(n);case 6:r=t.sent,O(r),f(!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:M,children:[Object(j.jsx)("button",{onClick:function(){return t.logout()},style:{marginBottom:30},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)(p.a,{style:{marginRight:10}}),"Sign Out"]})}),!a&&Object(j.jsx)(m,{text:"Loading Your Playlists"}),!l&&a&&!y&&Object(j.jsx)(z,{playlists:a,generatePlaylist:I}),l&&Object(j.jsx)(m,{text:"Finding Related Music"}),y&&Object(j.jsxs)("div",{style:{width:"100%"},children:[Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:20,marginBottom:14},children:[Object(j.jsx)("button",{onClick:function(){return O(void 0)},style:{marginRight:30},children:"Back"}),w&&Object(j.jsxs)("button",{onClick:function(){return window.open(w,"_blank")},children:[Object(j.jsx)(b.a,{})," Open Playlist"]}),!w&&Object(j.jsx)("button",{onClick:Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(y,S);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:"Save My Playlist"})]}),y.map((function(t){return Object(j.jsx)(x,{song:t},t.id)}))]})]})}var W=n(59),F=n.p+"static/media/icon.9570cc01.svg";function $(t){var e,n=function(){for(var t={},e=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1),r=e.exec(n);r;)t[r[1]]=decodeURIComponent(r[2]),r=e.exec(n);return t}();if(n.access_token&&n.state===localStorage.getItem("spotifyState"))t(!0),e=n.access_token,S.setAccessToken(e),window.location.hash="";else{var r=Math.random().toString(),a=!localStorage.getItem("spotifyState");localStorage.setItem("spotifyState",r);var c="https://accounts.spotify.com/authorize?client_id=".concat("c2fc1a6c5ec54aa2819513c41fc6d12f","&response_type=token&redirect_uri=").concat("https://amcolash.github.io/spotify-playlist-generator/","&scope=").concat(["playlist-read-private","playlist-modify-public"],"&state=").concat(r,"&show_dialog=").concat(a);window.location.href=c}}var G=Object(s.d)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",height:"100vh"},Object(s.c)(w,{height:"calc(100vh - 46px)"})),J=Object(s.d)({fontSize:72},Object(s.c)(w,{fontSize:52})),U=Object(s.d)({height:156,margin:42},Object(s.c)(w,{height:156,margin:16}),Object(s.c)({maxHeight:575},{margin:0})),H=Object(s.d)();function X(t){var e=!localStorage.getItem("spotifyState");return Object(r.useEffect)((function(){e||$(t.setAuthenticated)}),[t,e]),e?Object(j.jsxs)("div",{className:G,children:[Object(j.jsx)("h1",{className:J,style:{margin:0},children:"[DiscoList]"}),Object(j.jsx)("h3",{style:{marginTop:4},children:"Smart Music Discovery"}),Object(j.jsx)("img",{className:U,src:F,alt:"DiscoList logo"}),Object(j.jsxs)("h2",{className:H,children:["Please Sign In",Object(j.jsx)("br",{})," to Spotify"]}),Object(j.jsx)("button",{onClick:function(){return $(t.setAuthenticated)},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)(W.a,{style:{marginRight:10}}),"Sign In"]})})]}):Object(j.jsx)(m,{text:"Logging In"})}var Y=n.p+"static/media/Spotify_Logo_RGB_Green.0c4ae91b.png",q=Object(s.d)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflowX:"hidden"});Object(s.a)(".cover",{backgroundSize:"cover",backgroundPosition:"center",height:50,width:50,minWidth:50,border:"1px solid #555"});var K=Object(s.d)({position:"fixed",right:0,bottom:0,display:"flex",alignItems:"center",padding:"8px 5px 0",background:"rgba(0,0,0,0.85)"},Object(s.c)(w,{left:0,justifyContent:"center"}));var Q=function(){var t=Object(r.useState)(!1),e=Object(o.a)(t,2),n=e[0],a=e[1];return Object(j.jsxs)("div",{className:"App ".concat(q),children:[!n&&Object(j.jsx)(X,{setAuthenticated:a}),n&&Object(j.jsx)(E,{logout:function(){localStorage.removeItem("spotifyState"),a(!1)}}),Object(j.jsxs)("div",{className:K,children:[Object(j.jsx)("h3",{style:{margin:0,marginBottom:8},children:"Powered By"}),Object(j.jsx)("a",{href:"https://spotify.com",target:"_blank",rel:"noreferrer",style:{marginLeft:12},children:Object(j.jsx)("img",{src:Y,style:{height:35},alt:"Spotify Logo"})})]})]})};Object(s.a)("body",{margin:0,background:"#151515",color:"#eee",fontFamily:"'Montserrat', sans-serif",fontSize:20,scrollbarColor:"#454a4d #202324"}),Object(s.a)("button",{fontSize:16,fontWeight:"bold",minWidth:100,padding:10,borderRadius:500,background:"#179433",border:"none",color:"#eee",textTransform:"uppercase",transition:"background 0.25s",cursor:"pointer",$nest:{"&:hover":{background:"#18AC4D"}}}),Object(s.a)("::-webkit-scrollbar",{backgroundColor:"#202324"}),Object(s.a)("::-webkit-scrollbar-thumb",{backgroundColor:"#454a4d"});var V=Object(s.b)({"0%":{opacity:0},"100%":{opacity:1}});window.screen&&window.screen.orientation&&window.screen.orientation.lock&&window.screen.orientation.lock("portrait"),i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)("div",{style:{opacity:0,animation:V,animationDelay:"0.5s",animationDuration:"0.25s",animationFillMode:"forwards"},children:Object(j.jsx)(Q,{})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.41d38836.chunk.js.map