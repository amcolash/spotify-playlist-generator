{"version":3,"sources":["Loading.tsx","Song.tsx","Playlist.tsx","util.ts","UserPlaylists.tsx","Generate.tsx","img/icon.svg","Login.tsx","img/Spotify_Logo_RGB_Green.png","App.tsx","index.tsx"],"names":["Loading","props","style","display","flexDirection","alignItems","textAlign","marginTop","text","SpinnerCircularFixed","size","thickness","speed","color","secondaryColor","s","padding","info","marginLeft","Song","song","className","backgroundImage","album","images","url","name","artists","id","$nest","cursor","transition","background","Playlist","playlist","onClick","generatePlaylist","mobile","maxWidth","spotify","SpotifyWebApi","handleError","error","lastReload","Number","parseInt","localStorage","getItem","Date","now","setItem","toString","window","location","reload","paginationHelper","getData","a","Promise","resolve","reject","allData","page","data","push","body","items","next","getUserPlaylists","limit","offset","getPlaylist","getPlaylistTracks","getRelated","related","tracks","i","length","is_local","track","getRecommendations","seed_tracks","forEach","t","findIndex","f","createPlaylist","generated","setPlaylistLink","prompt","p","addTracksToPlaylist","slice","map","uri","external_urls","header","media","UserPlaylists","width","playlists","sort","b","localeCompare","generate","height","justifyContent","paddingBottom","Generate","useState","setPlaylists","isGenerating","setIsGenerating","setGenerated","playlistLink","useEffect","then","logout","marginBottom","marginRight","undefined","open","login","setAuthenticated","token","params","hashParams","r","q","hash","substring","e","exec","decodeURIComponent","getHashParams","access_token","state","setAccessToken","Math","random","showDialog","authorizeURL","href","container","title","fontSize","logo","margin","maxHeight","signin","Login","firstAuth","src","icon","alt","appStyle","overflowX","cssRule","backgroundSize","backgroundPosition","minWidth","border","footer","position","right","bottom","left","App","authenticated","removeItem","target","rel","spotifyLogo","fontFamily","scrollbarColor","fontWeight","borderRadius","textTransform","backgroundColor","fadeIn","keyframes","opacity","screen","orientation","lock","ReactDOM","render","StrictMode","animation","animationDelay","animationDuration","animationFillMode","document","getElementById"],"mappings":"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","file":"static/js/main.41d38836.chunk.js","sourcesContent":["import { SpinnerCircularFixed } from 'spinners-react';\n\nexport function Loading(props: { text: string }) {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', textAlign: 'center', marginTop: 60 }}>\n      <h2>{props.text}</h2>\n      <SpinnerCircularFixed size={40} thickness={200} speed={100} color=\"#179433\" secondaryColor=\"#202324\" />\n    </div>\n  );\n}\n","import { style } from 'typestyle';\n\nconst s = style({\n  display: 'flex',\n  padding: 8,\n});\n\nconst info = style({\n  display: 'flex',\n  alignItems: 'center',\n  marginLeft: 10,\n});\n\nexport function Song(props: { song: SpotifyApi.TrackObjectSimplified }) {\n  const { song } = props;\n\n  return (\n    <div className={s} key={song.id}>\n      <div\n        className=\"cover\"\n        style={{ backgroundImage: (song as any).album.images[2] ? `url(${(song as any).album.images[2].url})` : '' }}\n      />\n      <div className={info}>\n        {song.name} - {song.artists[0].name}\n      </div>\n    </div>\n  );\n}\n","import { style } from 'typestyle';\n\nconst s = style({\n  $nest: {\n    '.box': {\n      display: 'inline-flex',\n      alignItems: 'center',\n      padding: '8px 12px',\n\n      cursor: 'pointer',\n      transition: 'background 0.25s',\n\n      $nest: {\n        '&:hover': {\n          background: '#333',\n        },\n      },\n    },\n  },\n});\n\nexport function Playlist(props: { playlist: SpotifyApi.PlaylistObjectSimplified; generatePlaylist: (id: string) => void }) {\n  const { playlist } = props;\n\n  return (\n    <div className={s} key={playlist.id}>\n      <div className=\"box\" onClick={() => props.generatePlaylist(playlist.id)}>\n        <div\n          className=\"cover\"\n          style={{\n            backgroundImage: playlist.images[2]\n              ? `url(${playlist.images[2].url})`\n              : playlist.images[0]\n              ? `url(${playlist.images[0].url})`\n              : '',\n          }}\n        />\n        <div style={{ marginLeft: 10 }}>{playlist.name}</div>\n      </div>\n    </div>\n  );\n}\n","import SpotifyWebApi from 'spotify-web-api-node';\n\nexport const mobile = { maxWidth: 450 };\nexport const shortMobile = { maxHeight: 575 };\n\n// Useful code from https://stackoverflow.com/questions/58964265/spotify-implicit-grant-flow-with-react-user-login\nexport function getHashParams(): { [key: string]: string } {\n  const hashParams: { [key: string]: string } = {};\n  const r = /([^&;=]+)=?([^&;]*)/g;\n  const q = window.location.hash.substring(1);\n  let e = r.exec(q);\n  while (e) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n    e = r.exec(q);\n  }\n  return hashParams;\n}\n\nexport const spotify = new SpotifyWebApi();\nexport function setSpotifyToken(token: string): void {\n  spotify.setAccessToken(token);\n}\n\nexport function handleError(error: any): void {\n  debugger;\n\n  const lastReload = Number.parseInt(localStorage.getItem('spotifyLastError') || '0');\n\n  if (Date.now() - lastReload > 5000) {\n    localStorage.setItem('spotifyLastError', Date.now().toString());\n    window.location.reload();\n  }\n}\n\n// Uff, that is a bit generic ;)\nasync function paginationHelper<T>(\n  getData: (\n    page: number\n  ) => Promise<{\n    body: {\n      items: T[];\n      next: string | null;\n    };\n  }>\n): Promise<T[]> {\n  return new Promise<T[]>(async (resolve, reject) => {\n    const allData: T[] = [];\n    let page = 0;\n\n    while (page >= 0) {\n      try {\n        const data = await getData(page);\n        allData.push(...(data.body.items as any[]));\n\n        page = data.body.next ? page + 1 : -1;\n      } catch (error) {\n        handleError(error);\n        return;\n      }\n    }\n\n    resolve(allData);\n  });\n}\n\nexport async function getUserPlaylists(): Promise<SpotifyApi.PlaylistObjectSimplified[]> {\n  return paginationHelper((page: number) => spotify.getUserPlaylists({ limit: 50, offset: page * 50 }));\n}\n\nexport async function getPlaylist(id: string): Promise<SpotifyApi.PlaylistTrackObject[]> {\n  return paginationHelper((page: number) => spotify.getPlaylistTracks(id, { limit: 100, offset: page * 100 }));\n}\n\nexport async function getRelated(playlist: SpotifyApi.PlaylistTrackObject[]): Promise<SpotifyApi.TrackObjectSimplified[]> {\n  return new Promise(async (resolve, reject) => {\n    const related: SpotifyApi.TrackObjectSimplified[] = [];\n\n    let tracks = '';\n    for (let i = 1; i <= playlist.length; i++) {\n      if (playlist[i - 1].is_local) continue;\n\n      tracks += playlist[i - 1].track.id + (i % 5 !== 0 ? ',' : '');\n\n      if (i % 5 === 0) {\n        try {\n          const rec = await spotify.getRecommendations({ seed_tracks: tracks, limit: 10 });\n\n          // Ensure there are no duplicated. Can't use a Set here since {} !== {}\n          rec.body.tracks.forEach((t) => {\n            const found = related.findIndex((f) => f.id === t.id);\n            if (found === -1) related.push(t);\n          });\n\n          tracks = '';\n        } catch (error) {\n          handleError(error);\n          return;\n        }\n      }\n    }\n\n    resolve(related);\n  });\n}\n\nexport async function createPlaylist(\n  generated: SpotifyApi.TrackObjectSimplified[],\n  setPlaylistLink: (link: string) => void\n): Promise<void> {\n  return new Promise(async (resolve, reject) => {\n    const name = prompt('Name of playlist?');\n    if (!name || name.length === 0) {\n      reject();\n      return;\n    }\n\n    try {\n      const p = await spotify.createPlaylist(name);\n\n      for (let i = 0; i < generated.length; i += 100) {\n        await spotify.addTracksToPlaylist(\n          p.body.id,\n          generated.slice(i, i + 100).map((t) => t.uri)\n        );\n      }\n\n      setPlaylistLink(p.body.external_urls.spotify);\n    } catch (error) {\n      handleError(error);\n      return;\n    }\n\n    resolve();\n  });\n}\n","import { media, style } from 'typestyle';\nimport { Playlist } from './Playlist';\nimport { mobile } from './util';\n\nconst header = style(\n  {\n    marginLeft: 8,\n    marginTop: 12,\n  },\n  media(mobile, { textAlign: 'center' })\n);\n\nexport function UserPlaylists(props: { playlists: SpotifyApi.PlaylistObjectSimplified[]; generatePlaylist: (id: string) => void }) {\n  return (\n    <div style={{ width: '100%' }}>\n      <h2 className={header}>Choose a Playlist</h2>\n      {props.playlists\n        .sort((a, b) => a.name.localeCompare(b.name))\n        .map((p) => p.name && p.name.length > 0 && <Playlist key={p.id} playlist={p} generatePlaylist={props.generatePlaylist} />)}\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { Check, LogOut } from 'react-feather';\nimport { media, style } from 'typestyle';\nimport { Loading } from './Loading';\n\nimport { Song } from './Song';\nimport { UserPlaylists } from './UserPlaylists';\nimport { getUserPlaylists, getPlaylist, getRelated, createPlaylist, mobile } from './util';\n\nconst generate = style(\n  {\n    height: 'calc(100% - 40px)',\n    width: 'calc(100% - 40px)',\n    maxWidth: 800,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: 20,\n  },\n  media(mobile, { paddingBottom: 55 })\n);\n\nexport function Generate(props: { logout: () => void }) {\n  const [playlists, setPlaylists] = useState<SpotifyApi.PlaylistObjectSimplified[]>();\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generated, setGenerated] = useState<SpotifyApi.TrackObjectSimplified[]>();\n  const [playlistLink, setPlaylistLink] = useState<string>();\n\n  useEffect(() => {\n    getUserPlaylists().then((data) => setPlaylists(data));\n  }, []);\n\n  const generatePlaylist = async (id: string) => {\n    setIsGenerating(true);\n\n    const playlist = await getPlaylist(id);\n    const related = await getRelated(playlist);\n\n    setGenerated(related);\n    setIsGenerating(false);\n  };\n\n  return (\n    <div className={generate}>\n      <button onClick={() => props.logout()} style={{ marginBottom: 30 }}>\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n          <LogOut style={{ marginRight: 10 }} />\n          Sign Out\n        </div>\n      </button>\n\n      {!playlists && <Loading text=\"Loading Your Playlists\" />}\n      {!isGenerating && playlists && !generated && <UserPlaylists playlists={playlists} generatePlaylist={generatePlaylist} />}\n      {isGenerating && <Loading text=\"Finding Related Music\" />}\n      {generated && (\n        <div style={{ width: '100%' }}>\n          <div style={{ display: 'flex', justifyContent: 'center', marginTop: 20, marginBottom: 14 }}>\n            <button onClick={() => setGenerated(undefined)} style={{ marginRight: 30 }}>\n              Back\n            </button>\n            {playlistLink && (\n              <button onClick={() => window.open(playlistLink, '_blank')}>\n                <Check /> Open Playlist\n              </button>\n            )}\n            {!playlistLink && <button onClick={async () => await createPlaylist(generated, setPlaylistLink)}>Save My Playlist</button>}\n          </div>\n          {generated.map((t) => (\n            <Song key={t.id} song={t} />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/icon.9570cc01.svg\";","import { useEffect } from 'react';\nimport { LogIn } from 'react-feather';\nimport { Loading } from './Loading';\n\nimport { getHashParams, mobile, setSpotifyToken, shortMobile } from './util';\n\nimport icon from './img/icon.svg';\nimport { media, style } from 'typestyle';\n\nfunction login(setAuthenticated: (authenticated: boolean) => void) {\n  const params = getHashParams();\n\n  if (!params.access_token || params.state !== localStorage.getItem('spotifyState')) {\n    const scopes = ['playlist-read-private', 'playlist-modify-public'],\n      redirectUri =\n        process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : 'https://amcolash.github.io/spotify-playlist-generator/',\n      clientId = 'c2fc1a6c5ec54aa2819513c41fc6d12f',\n      state = Math.random().toString(),\n      showDialog = !localStorage.getItem('spotifyState');\n\n    localStorage.setItem('spotifyState', state);\n\n    // Do client-based auth flow\n    const authorizeURL = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=token&redirect_uri=${redirectUri}&scope=${scopes}&state=${state}&show_dialog=${showDialog}`;\n    window.location.href = authorizeURL;\n  } else {\n    setAuthenticated(true);\n    setSpotifyToken(params.access_token);\n\n    window.location.hash = '';\n  }\n}\n\nconst container = style(\n  {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    textAlign: 'center',\n    height: '100vh',\n  },\n  media(mobile, { height: 'calc(100vh - 46px)' })\n);\n\nconst title = style({ fontSize: 72 }, media(mobile, { fontSize: 52 }));\nconst logo = style({ height: 156, margin: 42 }, media(mobile, { height: 156, margin: 16 }), media(shortMobile, { margin: 0 }));\nconst signin = style();\n\nexport function Login(props: { setAuthenticated: (authenticated: boolean) => void }) {\n  const firstAuth = !localStorage.getItem('spotifyState');\n\n  useEffect(() => {\n    if (!firstAuth) login(props.setAuthenticated);\n  }, [props, firstAuth]);\n\n  if (!firstAuth) return <Loading text=\"Logging In\" />;\n\n  return (\n    <div className={container}>\n      <h1 className={title} style={{ margin: 0 }}>\n        [DiscoList]\n      </h1>\n      <h3 style={{ marginTop: 4 }}>Smart Music Discovery</h3>\n      <img className={logo} src={icon} alt=\"DiscoList logo\" />\n      <h2 className={signin}>\n        Please Sign In\n        <br /> to Spotify\n      </h2>\n      <button onClick={() => login(props.setAuthenticated)}>\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n          <LogIn style={{ marginRight: 10 }} />\n          Sign In\n        </div>\n      </button>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/Spotify_Logo_RGB_Green.0c4ae91b.png\";","import { useState } from 'react';\nimport { cssRule, media, style } from 'typestyle';\n\nimport { Generate } from './Generate';\nimport { Login } from './Login';\nimport { mobile } from './util';\n\nimport spotifyLogo from './img/Spotify_Logo_RGB_Green.png';\n\nconst appStyle = style({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  overflowX: 'hidden',\n});\n\ncssRule('.cover', {\n  backgroundSize: 'cover',\n  backgroundPosition: 'center',\n  height: 50,\n  width: 50,\n  minWidth: 50,\n  border: '1px solid #555',\n});\n\nconst footer = style(\n  {\n    position: 'fixed',\n    right: 0,\n    bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    padding: '8px 5px 0',\n    background: 'rgba(0,0,0,0.85)',\n  },\n  media(mobile, { left: 0, justifyContent: 'center' })\n);\n\nfunction App() {\n  const [authenticated, setAuthenticated] = useState(false);\n\n  const logout = () => {\n    localStorage.removeItem('spotifyState');\n    setAuthenticated(false);\n  };\n\n  return (\n    <div className={`App ${appStyle}`}>\n      {!authenticated && <Login setAuthenticated={setAuthenticated} />}\n      {authenticated && <Generate logout={logout} />}\n\n      <div className={footer}>\n        <h3 style={{ margin: 0, marginBottom: 8 }}>Powered By</h3>\n        <a href=\"https://spotify.com\" target=\"_blank\" rel=\"noreferrer\" style={{ marginLeft: 12 }}>\n          <img src={spotifyLogo} style={{ height: 35 }} alt=\"Spotify Logo\" />\n        </a>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { cssRule, keyframes } from 'typestyle';\nimport App from './App';\n\ncssRule('body', {\n  margin: 0,\n  background: '#151515',\n  color: '#eee',\n  fontFamily: \"'Montserrat', sans-serif\",\n  fontSize: 20,\n  scrollbarColor: '#454a4d #202324',\n});\n\ncssRule('button', {\n  fontSize: 16,\n  fontWeight: 'bold',\n  minWidth: 100,\n  padding: 10,\n  borderRadius: 500,\n  background: '#179433',\n  border: 'none',\n  color: '#eee',\n  textTransform: 'uppercase',\n  transition: 'background 0.25s',\n  cursor: 'pointer',\n\n  $nest: {\n    '&:hover': {\n      background: '#18AC4D',\n    },\n  },\n});\n\ncssRule('::-webkit-scrollbar', {\n  backgroundColor: '#202324',\n});\n\ncssRule('::-webkit-scrollbar-thumb', {\n  backgroundColor: '#454a4d',\n});\n\nconst fadeIn = keyframes({\n  '0%': { opacity: 0 },\n  '100%': { opacity: 1 },\n});\n\nif (window.screen && window.screen.orientation && window.screen.orientation.lock) window.screen.orientation.lock('portrait');\n\nReactDOM.render(\n  <React.StrictMode>\n    <div style={{ opacity: 0, animation: fadeIn, animationDelay: '0.5s', animationDuration: '0.25s', animationFillMode: 'forwards' }}>\n      <App />\n    </div>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}